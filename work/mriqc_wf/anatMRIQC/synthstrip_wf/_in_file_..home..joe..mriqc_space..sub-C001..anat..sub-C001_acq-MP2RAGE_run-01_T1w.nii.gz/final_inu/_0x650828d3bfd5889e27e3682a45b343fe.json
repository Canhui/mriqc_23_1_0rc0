[
    [
        "bias_image",
        [
            "/home/joe/mriqc_space/mriqc23.1.0rc0/work/mriqc_wf/anatMRIQC/synthstrip_wf/_in_file_..home..joe..mriqc_space..sub-C001..anat..sub-C001_acq-MP2RAGE_run-01_T1w.nii.gz/post_n4/clipped_bias.nii.gz",
            "907c836196e64e5550508c10c96631b7"
        ]
    ],
    [
        "function_str",
        "def _apply_bias_correction(in_file, bias_image, out_file=None):\n    import os.path as op\n\n    import numpy as np\n    import nibabel as nb\n\n    img = nb.load(in_file)\n    data = np.clip(\n        img.get_fdata() * nb.load(bias_image).get_fdata(),\n        a_min=0,\n        a_max=None,\n    )\n    out_img = img.__class__(\n        data.astype(img.get_data_dtype()),\n        img.affine,\n        img.header,\n    )\n\n    if out_file is None:\n        fname, ext = op.splitext(op.basename(in_file))\n        if ext == \".gz\":\n            fname, ext2 = op.splitext(fname)\n            ext = ext2 + ext\n        out_file = op.abspath(\"{}_inu{}\".format(fname, ext))\n\n    out_img.to_filename(out_file)\n    return out_file\n"
    ],
    [
        "in_file",
        [
            "/home/joe/mriqc_space/mriqc23.1.0rc0/work/mriqc_wf/anatMRIQC/_in_file_..home..joe..mriqc_space..sub-C001..anat..sub-C001_acq-MP2RAGE_run-01_T1w.nii.gz/conform/sub-C001_acq-MP2RAGE_run-01_T1w_conformed.nii.gz",
            "67f47b6b90b76feb941af78dd35e1adc"
        ]
    ]
]